/*********************************************************************************************************************
* DAVE APP Name : AUTOMATION       APP Version: 4.0.10
*
* NOTE:
* This file is generated by DAVE. Any manual modification done to this file will be lost when the code is regenerated.
*********************************************************************************************************************/

/**
 * @cond
 ***********************************************************************************************************************
 *
 * Copyright (c) 2015, Infineon Technologies AG
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,are permitted provided that the
 * following conditions are met:
 *
 *   Redistributions of source code must retain the above copyright notice, this list of conditions and the  following
 *   disclaimer.
 *
 *   Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the
 *   following disclaimer in the documentation and/or other materials provided with the distribution.
 *
 *   Neither the name of the copyright holders nor the names of its contributors may be used to endorse or promote
 *   products derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES,
 * INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE  FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY,OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT  OF THE
 * USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * To improve the quality of the software, users are encouraged to share modifications, enhancements or bug fixes
 * with Infineon Technologies AG (dave@infineon.com).
 ***********************************************************************************************************************
 *
 * Change History
 * --------------
 *
 * 2015-02-20:
 *     - Initial version
 *
 * @endcond
 *
 */
/***********************************************************************************************************************
 * HEADER FILES
 **********************************************************************************************************************/
#include "automation.h"
/**********************************************************************************************************************
* DATA STRUCTURES
**********************************************************************************************************************/


/* Table to save the relation between app_id and app handle pointer */
AUTOMATION_APP_TABLE_t AUTOMATION_App_Table[AUTOMATION_NUM_APPS];

/* Table to save the registered tasks */
AUTOMATION_TASK_TABLE_t AUTOMATION_Task_Table[AUTOMATION_NUM_TASKS];

/* Table to save the Drive State Nachine tasks */
AUTOMATION_SM_t* AUTOMATION_SM_Table[AUTOMATION_NUM_APPS];

#if(AUTOMATION_PH_ENABLE == 1U)
/* Table to save the app parameter table pointer */
AUTOMATION_PH_PARAM_ENTRY_t* AUTOMATION_PH_Param_Table[AUTOMATION_NUM_APPS];

AUTOMATION_PH_PARAMETER_t AUTOMATION_PH_Parameter_Buf[AUTOMATION_NUM_INTERFACES];
#endif

/* Table to save the function block connections */
AUTOMATION_FB_CONNECTION_TABLE_t AUTOMATION_FB_Connect_Table[AUTOMATION_FB_CONNECT_TABLE_SIZE];

/* List of the registered function blocks */
AUTOMATION_FB_HANDLE_t* AUTOMATION_FB_Table[AUTOMATION_FB_APP_FUNCTION_BLOCKS + 
                          AUTOMATION_FB_ENABLED_FUNCTION_BLOCKS];

#if(AUTOMATION_EH_ENABLE == 1U)
AUTOMATION_EH_LOGBOOK_ENTRY_t AUTOMATION_EH_LOGBOOK_DATA[AUTOMATION_EH_LOGBOOK_SIZE];
AUTOMATION_EH_LOGBOOK_ENTRY_t AUTOMATION_EH_APPBUFFER_DATA[AUTOMATION_EH_APPBUF_SIZE];

/* Logbook structure to save the error information */
AUTOMATION_EH_LOGBOOK_t AUTOMATION_EH_ErrorLogbook = 
{
  .cs_read_index          = 0U,
  .cs_write_index         = 0U,
  .cs_data_length         = 0U,
  .info_read_index        = AUTOMATION_EH_LOGBOOK_CS_SIZE,
  .info_write_index       = AUTOMATION_EH_LOGBOOK_CS_SIZE,
  .info_data_length       = 0U,
  .error_logbook_ptr      = AUTOMATION_EH_LOGBOOK_DATA,
};

/* Buffer to save the app error data */
AUTOMATION_EH_APPERROR_BUFFER_t AUTOMATION_EH_AppErrorBuf = 
{
  .read_index         = 0U,
  .write_index        = 0U,
  .data_length        = 0U,
  .error_logbook_ptr  = AUTOMATION_EH_APPBUFFER_DATA,
};

/* Bit interface error table */
AUTOMATION_EH_BIT_ERROR_TABLE_t AUTOMATION_EH_BitErrorTable[AUTOMATION_NUM_INTERFACES][AUTOMATION_EH_BITINTERFACE_MAX_ERRORS];
#endif


/* FB_RAMP0 configuration */
const AUTOMATION_FB_RAMP_CONFIG_t AUTOMATION_FB_Ramp0_Config = 
{
  .startset            = (int32_t)0,
  .endset              = (int32_t)1500,
  .linear_acceleration = (int32_t)100,
  .time_constant       = 6666U,
  .linear_startvalue   = (int32_t)300,
  .linear_endvalue     = (int32_t)1200,
  .slewrate_counter    = 666U,
  .slewrate_endset     = (int32_t)200,
  .callrate            = AUTOMATION_FB_RAMP_CALLRATE_SVP_TASK,
  .ramp_type           = AUTOMATION_FB_RAMPTYPE_LINEAR,
  .ratio               =  20U,
};


AUTOMATION_FB_RAMPGEN_t AUTOMATION_Ramp0_Handle =
{
  .endset_t            = (int32_t)1500,
  .endset_ptr          = &AUTOMATION_Ramp0_Handle.endset_t,
  .out_set_t           = (int32_t)0,
  .scale               = 32768U,
  .scale_ptr           = &AUTOMATION_Ramp0_Handle.scale,
  .counter             = 66U,
  .index               = 0U,
  .prev_endset_t       = (int32_t)1500,
  .slewrate_end        = (int32_t)200,
  .slewrate_startset_t = (int32_t)0,
  .slewrate_endset_t   = (int32_t)200,
  .slewrate_set_t      = (int32_t)0,
  .slewrate_index      = 0U,
  .linear_startvalue_t = (int32_t)300,
  .linear_endvalue_t   = (int32_t)1200,
  .config_ptr          = &AUTOMATION_FB_Ramp0_Config
};

int32_t ** AUTOMATION_FB_RAMP0_INPUT[] = {&AUTOMATION_Ramp0_Handle.endset_ptr, (int32_t**)&AUTOMATION_Ramp0_Handle.scale_ptr};
int32_t * AUTOMATION_FB_RAMP0_OUTPUT[] = {&AUTOMATION_Ramp0_Handle.out_set_t};

AUTOMATION_FB_HANDLE_t AUTOMATION_FB_RAMP_0 =
{
  .input_ptr  = AUTOMATION_FB_RAMP0_INPUT,
  .output_ptr = AUTOMATION_FB_RAMP0_OUTPUT,
  .config_ptr = &AUTOMATION_Ramp0_Handle,
  .name       = "FB_RAMP_0",
  .function   = (AUTOMATION_FB_FUNCT_PTR_t)AUTOMATION_FB_LinearRamp
};


/* FB_RAMP1 configuration */
const AUTOMATION_FB_RAMP_CONFIG_t AUTOMATION_FB_Ramp1_Config = 
{
  .startset            = (int32_t)0,
  .endset              = (int32_t)1500,
  .linear_acceleration = (int32_t)100,
  .time_constant       = 6666U,
  .linear_startvalue   = (int32_t)300,
  .linear_endvalue     = (int32_t)1200,
  .slewrate_counter    = 666U,
  .slewrate_endset     = (int32_t)200,
  .callrate            = AUTOMATION_FB_RAMP_CALLRATE_SVP_TASK,
  .ramp_type           = AUTOMATION_FB_RAMPTYPE_LINEAR,
  .ratio               = 20U,

};

AUTOMATION_FB_RAMPGEN_t AUTOMATION_Ramp1_Handle =
{
  .endset_t            = (int32_t)1500,
  .endset_ptr          = &AUTOMATION_Ramp0_Handle.endset_t,
  .out_set_t           = (int32_t)0,
  .scale               = 32768U,
  .scale_ptr           = &AUTOMATION_Ramp0_Handle.scale,
  .counter             = 66U,
  .index               = 0U,
  .prev_endset_t       = (int32_t)1500,
  .slewrate_end        = (int32_t)200,
  .slewrate_startset_t = (int32_t)0,
  .slewrate_endset_t   = (int32_t)200,
  .slewrate_set_t      = (int32_t)0,
  .slewrate_index      = 0U,
  .linear_startvalue_t = (int32_t)300,
  .linear_endvalue_t   = (int32_t)1200,
  .config_ptr          = &AUTOMATION_FB_Ramp1_Config
};

int32_t ** AUTOMATION_FB_RAMP1_INPUT[] = {&AUTOMATION_Ramp1_Handle.endset_ptr, (int32_t**)&AUTOMATION_Ramp1_Handle.scale_ptr};
int32_t * AUTOMATION_FB_RAMP1_OUTPUT[] = {&AUTOMATION_Ramp1_Handle.out_set_t};

AUTOMATION_FB_HANDLE_t AUTOMATION_FB_RAMP_1 =
{
  .input_ptr  = AUTOMATION_FB_RAMP1_INPUT,
  .output_ptr = AUTOMATION_FB_RAMP1_OUTPUT,
  .config_ptr = &AUTOMATION_Ramp1_Handle,
  .name       = "FB_RAMP_1",
  .function   = (AUTOMATION_FB_FUNCT_PTR_t)AUTOMATION_FB_LinearRamp
};

  
AUTOMATION_FB_HANDLE_t* AUTOMATION_FB_ExecutionOrderList[AUTOMATION_FB_EXECUTED_FUNCTION_BLOCKS]; 


AUTOMATION_t AUTOMATION_0 = 
{
  .systimer_ptr                = &SYSTIMER_0,
  .fb_timer_id                 = 0U,
  .eh_timer_id                 = 0U,
  .state                       = AUTOMATION_STATE_UNINITIALIZED,
  .app_id                      = 0U,
  .interface_id                = 0U,
  .fb_id                       = 0U,
  .task_id                     = 0U,
  .fb_connect_table_write_index= 0U,
  .fb_connect_table_read_index = 0U,
  .fb_connect_table_data_length= AUTOMATION_FB_CONNECT_TABLE_SIZE
};


